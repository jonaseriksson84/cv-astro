<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jonas Eriksson - Fullstack Engineer</title>
    
    <!-- Preload critical font files -->
    <link rel="preload" href="/hiatus.otf" as="font" type="font/otf" crossorigin />
    
    <!-- Optimize Google Fonts loading with display=swap -->
    <link
      rel="preconnect" 
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect" 
      href="https://fonts.gstatic.com" 
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css?family=Indie+Flower&display=swap"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    <!-- Fallback for non-JS environments -->
    <noscript>
      <link
        href="https://fonts.googleapis.com/css?family=Indie+Flower&display=swap"
        rel="stylesheet"
      />
      <link
        href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap"
        rel="stylesheet"
      />
    </noscript>
    
    <!-- Preload critical background images -->
    <link rel="preload" href="/wood.webp" as="image" type="image/webp" />
    <link rel="preload" href="/paper-transparent.avif" as="image" type="image/avif" />
  </head>

  <body class="font-sans transition-all duration-300">
    <slot />
    <style is:global>
      /* Custom font with font-display: swap for better loading experience */
      @font-face {
        font-family: 'hiatus';
        src: url('/hiatus.otf') format('opentype');
        font-display: swap;
      }
      
      /* Fun theme (default) */
      body {
        --bg-texture: url('wood.webp');
        --paper-texture: url('paper-transparent.avif');
        --img-filter: none;
      }

      /* Business theme */
      body.business-theme {
        --bg-texture: none;
        --paper-texture: none;
        --img-filter: grayscale(100%);
      }

      /* Fun theme styles */
      body:not(.business-theme) {
        font-family: 'Indie Flower', cursive;
      }

      body:not(.business-theme) h1,
      body:not(.business-theme) h2,
      body:not(.business-theme) h3,
      body:not(.business-theme) h4,
      body:not(.business-theme) p,
      body:not(.business-theme) li,
      body:not(.business-theme) span:not(.font-custom) {
        font-family: 'Indie Flower', cursive;
      }

      /* Business theme styles */
      body.business-theme {
        font-family: 'Source Sans Pro', system-ui, -apple-system, sans-serif;
        background: #f5f5f5 !important;
      }

      body.business-theme main {
        background: white !important;
      }

      body.business-theme h1,
      body.business-theme h2,
      body.business-theme h3,
      body.business-theme h4,
      body.business-theme p,
      body.business-theme li,
      body.business-theme span:not(.font-custom) {
        font-family: 'Source Sans Pro', system-ui, -apple-system, sans-serif !important;
      }

      body.business-theme .border-dashed {
        border-style: solid !important;
        border-color: #ddd !important;
      }

      /* Keep the custom font for the name in both themes */
      .font-custom {
        font-family: 'hiatus', sans-serif !important;
      }

      @media print {
        #theme-toggle {
          display: none !important;
        }

        body {
          font-family: 'Source Sans Pro', system-ui, -apple-system, sans-serif;
          background: none !important;
          color: black;
        }

        main {
          box-shadow: none !important;
          background: white !important;
          padding: 0 !important;
          margin: 0 !important;
          max-width: none !important;
        }

        /* Remove decorative background images */
        div[style*="background-image"] {
          background-image: none !important;
        }

        /* Ensure text is black and readable */
        p, li, h1, h2, h3, h4, span {
          color: black !important;
        }

        /* Adjust spacing for print */
        .p-4, .px-8, .py-4 {
          padding: 0.5rem !important;
        }

        /* Make links black and remove underlines */
        a {
          color: black !important;
          text-decoration: none !important;
        }

        /* Ensure borders are visible */
        .border-dashed {
          border-color: #666 !important;
        }
      }

      /* Business theme styles */
      body.business-theme .business-theme\:hidden {
        display: none;
      }

      body.business-theme .business-theme\:block {
        display: block;
      }
    </style>
  </body>
</html>
